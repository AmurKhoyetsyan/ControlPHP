#!/usr/bin/env php
<?php
    require __DIR__ . '/vendor/autoload.php';
    use Lib\File\File;

    function namePrint()
    {
        echo "\033[0;36m    ###      ###    ####    ## ########  ####       ###    ##      \033[0m \n";
        echo "\033[0;36m  ##   ##  ##   ##  ## ##   ##    ##    ###  ##   ##   ##  ##      \033[0m \n";
        echo "\033[0;36m ##       ##     ## ##  ##  ##    ##    ##    ## ##     ## ##      \033[0m \n";
        echo "\033[0;36m ##       ##     ## ##  ##  ##    ##    ## ###   ##     ## ##      \033[0m \n";
        echo "\033[0;36m  ##   ##  ##   ##  ##   ## ##    ##    ##  ##    ##   ##  ##      \033[0m \n";
        echo "\033[0;36m    ###      ###    ##    ####    ##    ##   ##     ###    ####### \033[0m \n";
    }

    function licensePrint()
    {
        echo "\033[0;35m The MIT License (MIT) \033[0m \n";
        echo " \n";
        echo "\033[0;35m Copyright (c) 2022 Amur Khoyetsyan \033[0m \n";
        echo " \n";
        echo "\033[0;35m Permission is hereby granted, free of charge, to any person obtaining a copy \033[0m \n";
        echo "\033[0;35m of this software and associated documentation files (the \"Software\"), to deal \033[0m \n";
        echo "\033[0;35m in the Software without restriction, including without limitation the rights \033[0m \n";
        echo "\033[0;35m to use, copy, modify, merge, publish, distribute, sublicense, and/or sell \033[0m \n";
        echo "\033[0;35m copies of the Software, and to permit persons to whom the Software is \033[0m \n";
        echo "\033[0;35m furnished to do so, subject to the following conditions: \033[0m \n";
        echo " \n";
        echo "\033[0;35m The above copyright notice and this permission notice shall be included in all \033[0m \n";
        echo "\033[0;35m copies or substantial portions of the Software. \033[0m \n";
        echo " \n";
        echo "\033[0;35m THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \033[0m \n";
        echo "\033[0;35m IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \033[0m \n";
        echo "\033[0;35m FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \033[0m \n";
        echo "\033[0;35m AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \033[0m \n";
        echo "\033[0;35m LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, \033[0m \n";
        echo "\033[0;35m OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE \033[0m \n";
        echo "\033[0;35m SOFTWARE. \033[0m \n";
    }

    function views()
    {
        $start = time();

        $dir = basePath() . DIRECTORY_SEPARATOR . 'storage' . DIRECTORY_SEPARATOR . 'views';

        $files = scanDir($dir);

        foreach ($files as $file => $value) {
            if ($value === '.' || $value === '..') {
                continue;
            }

            $path = $dir . DIRECTORY_SEPARATOR . $value;
            File::removeFile($path);
        }

        $end = time();

        echo 'start :: ' . $start . "\n";
        echo 'end :: ' . $end . "\n";
        echo 'duration :: ' . ($end - $start) . "\n";
    }

    $count = count($argv);

    if ($count > 0 && $argv[0] === 'control' && $count > 1) {
        switch($argv[1]) {
            case 'view:clear': views(); break;
            case '-v': echo "\033[0;31m CONTROL PHP V 0.0.1 \033[0m \n"; break;
            case 'version': echo "\033[0;31m CONTROL PHP V 0.0.1 \033[0m \n"; break;
            case '-n': namePrint(); break;
            case 'name': namePrint(); break;
            case '-l': echo "\033[0;33m The MIT License (MIT) \033[0m \n";; break;
            case 'license': echo "\033[0;33m The MIT License (MIT) \033[0m \n";; break;
            case '-lp': licensePrint(); break;
            case 'license:print': licensePrint(); break;
            case '-a': echo "\033[0;32m AUTHOR AMUR KHOYETSYN \033[0m"; break;
            case 'author': echo "\033[0;32m AUTHOR AMUR KHOYETSYN \033[0m"; break;
            default: echo $argv[1] . ': command not found'; break;
        }
    }

